<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-js-f7c1aba907a24c2fee22.js" as="script"/><link rel="preload" href="/component---src-templates-blog-template-with-toc-js-344f2b27f97a3f6d2906.js" as="script"/><link rel="preload" href="/path---projects-mailroom-f1aea9bca1827d539acc.js" as="script"/><link rel="preload" href="/app-25896bf7c2892019ba26.js" as="script"/><link rel="preload" href="/commons-403258ad126d5c26671b.js" as="script"/><title data-react-helmet="true">DeanSallinen.ca</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style id="gatsby-inlined-css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:#333;font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt","kern"}img{max-width:100%;margin:0 0 1.45rem;padding:0}h1{font-size:2.25rem}h1,h2{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{margin:0 0 1.45rem 1.45rem;padding:0;list-style-position:outside;list-style-image:none}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{padding:0;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}pre,table{margin:0 0 1.45rem}table{padding:0;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset{margin:0 0 1.45rem;padding:0}blockquote{margin:0 1.45rem 1.45rem;padding:0}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{margin:0 0 calc(1.45rem - 1px);padding:0;background:rgba(0,0,0,.2);border:none;height:1px}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:0;padding-top:.2em;padding-bottom:.2em}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}figcaption{text-align:center}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-152936382"><!-- react-empty: 2 --><div style="background-color:#FFB7A0;height:.1rem;" data-reactid="3"></div><div style="margin-bottom:1.45rem;" data-reactid="4"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem;" data-reactid="5"><h3 style="margin:0;display:inline;" data-reactid="6"><a style="color:#333;text-decoration:none;" href="/" data-reactid="7">DeanSallinen.ca</a></h3><ul style="list-style:none;float:right;font-family:sans-serif;" data-reactid="8"><li style="display:inline-block;" data-reactid="9"><a style="text-decoration:none;color:#333;" href="/about" data-reactid="10">About</a></li></ul></div></div><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0;" data-reactid="11"><div class="blog-post-container" style="display:grid;" data-reactid="12"><div class="blog-post" style="max-width:45rem;" data-reactid="13"><h1 data-reactid="14">Mailroom</h1><div class="blog-post-content" data-reactid="15"><p>This simple web app intends to solve a client's problem with interoffice mail. In their current system there are multiple paper forms and an elaborate filing system required for each article of mail sent out from the office. This simple webapp is meant to be a prototype for a paperless system in that office.</p>
<p>This post is written in the form of a tutorial. The target audience is a personal friend who has basic Javascript experience and wanted to learn how to build a CRUD app with a REST API. I documented my process so he could follow along.</p>
<h2 id="ideation"><a href="#ideation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ideation</h2>
<p>Employees will fill out a simple form with the address information for their letters and parcels and our app will generate a QR code which they will print and physically attach to their mail.</p>
<p>When the mailroom receives this letter/parcel they will then scan the QR code which will query the database for the relevant address information.</p>
<p>The mailroom can then weigh the package, update the record with measurements, decide on the correct carrier and shipping methodology, generate the shipping label using all the data, and finally ship the package while sending a message to the sender their mail has been shipped.</p>
<h2 id="setup"><a href="#setup" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h2>
<p>We'll start by creating a new directory using the command line with <code class="language-text">$ mkdir mailroom</code> and run <code class="language-text">$ npm install express-generator -g</code> to install the tool that will allow us to skeleton out our app quickly.</p>
<p>Run <code class="language-text">$ express --no-view --git --force</code> to skeleton an app with no templating engine (because we plan on using React) as well as an empty .gitignore file. We add the force flag because the directory currently contains this README markdown file.</p>
<p>Now we can begin installing packages for our app. First run <code class="language-text">$ npm install</code> to install the packages required by express.</p>
<p>Now would also be a good time to initialize a git repository. Run <code class="language-text">$ git init</code> and <code class="language-text">$ git add -A</code> to add the beginnings of our app to the git repository, and make the first commit with <code class="language-text">$ git commit -m &quot;initialize repo&quot;</code>. Now our app is under version control and if we make a mistake adding new features, we can easily roll back to a time when our app worked!</p>
<p>Okay, lets test our express installation. Run <code class="language-text">$ npm start</code> and open up a browser to <a href="http://localhost:3000">http://localhost:3000</a> where you should see the following image. This means the installation was successful:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/000-c6344ebe58d4d79c9c7231bd6a657db2-9e050.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 523px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 75.52581261950287%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABgUlEQVQ4y61UaWvCQBDN/0d/hcaqn8RURASNCkIba4QqJPEI4pFDbPrBM0Zfd7ZNL1rbpg48Znd25jE7M7tCLBZDKnWFRCKBXC6HQqEASbpGqVRCuVzmkCSJ+aQgiiLEZJL70jqTyXCk02l+Ho/HIdBG03R0Oh04jgPHttHv97FcLrHdbrFer+F5HnRNw12rhVZLgaIoUFUVuq5zX42d9Xo9ZLNZCPl8HqvVCtPpDPO5BZsRmqaJwWAIy7Lgui4n3u/38A8HHF7g+z637XY7bDYbrovFIoRKpQISMpBDCAp4H3wOFEsiyzIEuVbDf+V4PHLdaDQgVKtVvjFHQ7TbbQaV1aOL0chEEDw7nk6nswgJ6/X6G6E1n7GiK7i5VdDt3rNCG68ZUNCvM6R7k1AnbcfGI9PegwfXcbFwFx8y/BNh2C3qKK1JU8EjE4bGz/LTdb8lDILgy4JHzpAILzo2NMB0EAVhMnxsiPVS0mw2IdBvMZlM+AM3DCMSKHY8HvPP4QklHmcvBj8ILwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of express default page"
        title=""
        src="/static/000-c6344ebe58d4d79c9c7231bd6a657db2-9e050.png"
        srcset="/static/000-c6344ebe58d4d79c9c7231bd6a657db2-5db1f.png 200w,
/static/000-c6344ebe58d4d79c9c7231bd6a657db2-b2bd0.png 400w,
/static/000-c6344ebe58d4d79c9c7231bd6a657db2-9e050.png 523w"
        sizes="(max-width: 523px) 100vw, 523px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h2 id="database"><a href="#database" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Database</h2>
<p>Let's set up the database. First, stop the server with <code class="language-text">CTRL-C</code> and run <code class="language-text">$ npm install sqlite bluebird --save</code>.</p>
<p>We will be using Sqlite for our database in this project as it can be run with minimal setup. I've also chosen to use the <code class="language-text">sqlite</code> package instead of <code class="language-text">sqlite3</code> as this lets us use promises instead of callbacks to access the database. This is a more modern syntax and, in my opinion, easier to read and understand what's going on. Also, we installed <code class="language-text">bluebird</code> to handle promises. Though not really necessary for this scale of project, it was something I wanted to learn.</p>
<p>Create a folder for migrations, which will be useful going forward when we want to modify the database schema.</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">$ mkdir migrations &amp;&amp; cd migrations</code></pre>
      </div>
<p>Lets create our first migration <code class="language-text">$ touch 001-init.sql</code> and write some SQL.</p>
<div class="gatsby-highlight" data-language="sql">
      <pre class="language-sql"><code class="language-sql"><span class="token comment">-- Up</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> parcels
<span class="token punctuation">(</span>
    id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    user_id <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    file_id <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    shipment_type <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    shipment_destination <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    shipment_speed <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    attn_name <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    attn_phone <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    attn_organization <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    street_address <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    city <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    state_or_province <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    country <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    postal_code <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    us_value_of_goods <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    us_content_declaration <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    barcode <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    carrier_tracking_number <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    shipment_weight <span class="token keyword">INT</span><span class="token punctuation">,</span>
    shipment_length <span class="token keyword">INT</span><span class="token punctuation">,</span>
    shipment_width <span class="token keyword">INT</span><span class="token punctuation">,</span>
    shipment_height <span class="token keyword">INT</span><span class="token punctuation">,</span>
    shipping_method <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    shipment_status <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    creation_date <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    received_date <span class="token keyword">TEXT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> parcels
    <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> street_address<span class="token punctuation">,</span> attn_name<span class="token punctuation">,</span>
    attn_organization<span class="token punctuation">,</span> city<span class="token punctuation">,</span> state_or_province<span class="token punctuation">,</span> country<span class="token punctuation">,</span> postal_code<span class="token punctuation">,</span> barcode<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
    <span class="token punctuation">(</span><span class="token string">"1A"</span><span class="token punctuation">,</span> <span class="token string">"123 Example Street"</span><span class="token punctuation">,</span> <span class="token string">"Spiderman"</span><span class="token punctuation">,</span> <span class="token string">"The Avengers"</span><span class="token punctuation">,</span> <span class="token string">"New York City"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"US"</span><span class="token punctuation">,</span> <span class="token string">"12345"</span><span class="token punctuation">,</span> <span class="token string">"f34c6658-818b-11e8-adc0-fa7ae01bbebc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Down</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> parcels<span class="token punctuation">;</span></code></pre>
      </div>
<p>Now we'll add our database connection in <code class="language-text">app.js</code> (we can refactor it into a connection file later)</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> Promise <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bluebird'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sqlite <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'sqlite'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> dbPromise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> sqlite<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'./mailroom.sqlite'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> Promise <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>db <span class="token operator">=></span> db<span class="token punctuation">.</span><span class="token function">migrate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> force<span class="token punctuation">:</span> <span class="token string">'last'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>This will create a database file in our root directory (if it doesn't already exist), add some test data, open a connection, and use the latest migration to ensure our database is using the newest schema during development.</p>
<h2 id="writing-tests"><a href="#writing-tests" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing Tests</h2>
<p>We're going to write some tests to ensure our REST endpoints work as expected. For running tests we will install Mocha, Chai, and ChaiHTTP. Let's create a directory to keep our tests <code class="language-text">$ mkdir test</code> then install the test suite:</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">$ npm install mocha -g &amp;&amp; npm install mocha chai chai-http --save-dev</code></pre>
      </div>
<h2 id="routing"><a href="#routing" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Routing</h2>
<p>Lets start by creating a test file with <code class="language-text">$ touch test/routes.spec.js</code> where we will add the tests for our API routes. First include the correct libraries and tell Chai to use the HTTP module.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> chai <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chai'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> should <span class="token operator">=</span> chai<span class="token punctuation">.</span><span class="token function">should</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> chaiHttp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chai-http'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../app'</span><span class="token punctuation">)</span>

chai<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>chaiHTTP<span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="get"><a href="#get" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GET</h3>
<p>Now we can describe our first test. Let's ensure that when we hit the <code class="language-text">/api/v1/parcels</code> URL we receive an array of all parcels in the database.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'API Routes'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'GET /api/v1/parcels'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return all parcels'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      chai
        <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
          res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span>json
          res<span class="token punctuation">.</span>body<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'array'</span><span class="token punctuation">)</span>
          <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Now if we run <code class="language-text">$ mocha</code> on the command line to start our test we see the following error:</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">deans-Mac-Pro:mailroom dean$ mocha


  API Routes
    GET /api/v1/parcels
GET /api/v1/parcels 200 5.857 ms - 11
      1) should return all parcels


  0 passing (58ms)
  1 failing

  1) API Routes
       GET /api/v1/parcels
         should return all parcels:
     Uncaught AssertionError: expected &#39;text/html; charset=utf-8&#39; to include &#39;application/json&#39;
      at /Users/dean/Documents/projects/mailroom/test/routes.spec.js:16:25
      at Test.Request.callback (node_modules/superagent/lib/node/index.js:716:12)
      at IncomingMessage.parser (node_modules/superagent/lib/node/index.js:916:18)
      at endReadableNT (_stream_readable.js:1062:12)
      at process._tickCallback (internal/process/next_tick.js:152:19)</code></pre>
      </div>
<p>It's saying that we aren't receiving json back from the server, so let's correct that by first opening <code class="language-text">app.js</code> and adding</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Routes</span>
app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> dbPromise
    <span class="token keyword">const</span> parcels <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'SELECT * FROM parcels'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>parcels<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>So now when our client hits the <code class="language-text">/api/v1/parcels</code> route the server opens a connection to the database, selects all parcels from our parcels table, and sends the result back to the client.</p>
<h3 id="post"><a href="#post" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>POST</h3>
<p>Before we write the code that lets us add a new parcel, we need some helpers for generating the unique barcodes. Lets run <code class="language-text">$ npm install uuid -s</code> and in <code class="language-text">app.js</code> add</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> uuidv4 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uuid/v4'</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Lets write another test, inside the same 'API Routes' function block just underneath the <code class="language-text">GET /api/v1/parcels</code> test, this time for posting a new parcel to the server:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'POST /api/v1/parcels'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should create one parcel'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      chai
        <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          user_id<span class="token punctuation">:</span> <span class="token string">'Dean'</span><span class="token punctuation">,</span>
          street_address<span class="token punctuation">:</span> <span class="token string">'1234 Main St'</span><span class="token punctuation">,</span>
          attn_name<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
          attn_organization<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
          city<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
          state_or_province<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
          country<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
          postal_code<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
          barcode<span class="token punctuation">:</span> <span class="token string">'0e2887fc-19c9-4bf5-a9fc-0c5f5a23a87c'</span><span class="token punctuation">,</span>
          shipment_status<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
          creation_date<span class="token punctuation">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>Notice how we don't have every field we added to our database? When we are creating a new parcel, this is the data the user will enter. When the mailroom later updates the parcel with the shipping information and the package dimensions they will update this record with the missing information.</p>
<p>And again we go into <code class="language-text">app.js</code> to add a route:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span>
      $user_id<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span>
      $street_address<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>street_address<span class="token punctuation">,</span>
      $attn_name<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>attn_name<span class="token punctuation">,</span>
      $recipient_first_name<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>recipient_first_name<span class="token punctuation">,</span>
      $recipient_last_name<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>recipient_last_name<span class="token punctuation">,</span>
      $attn_organization<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>attn_organization<span class="token punctuation">,</span>
      $city<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
      $state_or_province<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>state_or_province<span class="token punctuation">,</span>
      $country<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>country<span class="token punctuation">,</span>
      $postal_code<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>postal_code<span class="token punctuation">,</span>
      $uuid<span class="token punctuation">:</span> uuid<span class="token punctuation">,</span>
      $parcel_status<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>parcel_status<span class="token punctuation">,</span>
      $creation_date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> uuid <span class="token operator">=</span> <span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> dbPromise
    <span class="token keyword">const</span> parcels <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token string">`INSERT INTO parcels (
            user_id,
            street_address,
            attn_name,
            attn_organization,
            city,
            state_or_province,
            country,
            postal_code,
            barcode,
            shipment_status,
            creation_date) 
        VALUES (       
            $user_id,
            $street_address,
            $attn_name,
            $attn_organization,
            $city,
            $state_or_province,
            $country,
            $postal_code,
            $barcode,
            $shipment_status,
            $creation_date)`</span></span><span class="token punctuation">,</span>
      payload
    <span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      message<span class="token punctuation">:</span> <span class="token string">'Success!'</span><span class="token punctuation">,</span>
      barcode<span class="token punctuation">:</span> uuid<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Here when a client hits the <code class="language-text">/api/v1/parcels</code> route with a POST request and supplies address information, it's saved in the database as a new record.</p>
<p>Notice how we are using <code class="language-text">uuidv4()</code> to generate a unique code for each record. We return the uuid as the response, the idea here is we will use this string to generate the barcode in the front-end. We also use <code class="language-text">new Date().toISOString()</code> to add a timestamp of when that record was created.</p>
<p>Instead of sending an array of values as the payload we can send an object with key:value pairs.</p>
<p><strong>NOTE:</strong> Make sure to include the <code class="language-text">$</code> in front of the key otherwise sqlite won't recognize it as a placeholder! (multiple hours spent trying to figure out why this wasn't working...)</p>
<p>If you're wondering (like I did) why it seems like the POST request is updating and not inserting new values each time the test is run, it's because we added <code class="language-text">{ force: &#39;last&#39; }</code> to re-run the latest migration every time we restart our server. So even though it looks like the barcode and creation_date are changing in place, it's really:</p>
<ol>
<li>Dropping the parcels table</li>
<li>Inserting the two sample rows in our 001-init.sql file</li>
<li>POSTing the new row with the new data</li>
</ol>
<p>Keep that in mind!</p>
<h3 id="put"><a href="#put" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PUT</h3>
<p>When a package is received by the mailroom in real life they will scan the barcode and pull up the database record to add shipping information and package dimensions. But before we can make updates to parcels we need to be able to GET individual parcels by their barcode.</p>
<p>In <code class="language-text">routes.spec.js</code> we can add a new test for the new route we are about to create:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'GET /api/v1/parcels/:barcode'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return one parcel'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chai
      <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebc'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span>json
        res<span class="token punctuation">.</span>body<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Here we are using a barcode from one of our sample rows in the <code class="language-text">001-init.sql</code> file as these are static and easy to reference.</p>
<p>Run the test with <code class="language-text">$ mocha</code> and see that it fails with a 404. Now we need to write the route. In <code class="language-text">app.js</code> under our other routes add:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels/:barcode'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> dbPromise
    <span class="token keyword">const</span> parcels <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>
      <span class="token string">'SELECT * FROM parcels WHERE barcode = ?'</span><span class="token punctuation">,</span>
      req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>barcode
    <span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>parcels<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Rerun the test and... voila! 3 passing tests.</p>
<p>You can even verify in the browser by entering <a href="http://localhost:3000/api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebc">http://localhost:3000/api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebc</a> to see our test data.</p>
<p>Now that the mailroom can access a single record, we need to be able to update that record. Let's write a test. Because sqlite doesn't return the inserted row as an object, it only returns the number of rows modified, we'll test that the number of modified rows is non-zero:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'PUT /api/v1/parcels/:barcode'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should update one parcel'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chai
      <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebc'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        shipment_weight<span class="token punctuation">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
        shipment_length<span class="token punctuation">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
        shipment_width<span class="token punctuation">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
        shipment_height<span class="token punctuation">:</span> <span class="token string">'4'</span><span class="token punctuation">,</span>
        shipping_method<span class="token punctuation">:</span> <span class="token string">'Expedited'</span><span class="token punctuation">,</span>
        shipment_status<span class="token punctuation">:</span> <span class="token string">'Received'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span>json
        res<span class="token punctuation">.</span>body<span class="token punctuation">.</span>should<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Run the test and see that it fails. That's a good sign. Now we write the route. This looks similar to the previous route we made:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels/:barcode'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span>
      $barcode<span class="token punctuation">:</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>barcode<span class="token punctuation">,</span>
      $shipment_weight<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>shipment_weight<span class="token punctuation">,</span>
      $shipment_length<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>shipment_length<span class="token punctuation">,</span>
      $shipment_width<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>shipment_width<span class="token punctuation">,</span>
      $shipment_height<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>shipment_height<span class="token punctuation">,</span>
      $shipping_method<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>shipping_method<span class="token punctuation">,</span>
      $shipment_status<span class="token punctuation">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>shipment_status<span class="token punctuation">,</span>
      $received_date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> dbPromise
    <span class="token keyword">const</span> parcels <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token string">`UPDATE parcels SET
            shipment_weight=$shipment_weight,
            shipment_length=$shipment_length,
            shipment_width=$shipment_width,
            shipment_height=$shipment_height,
            shipping_method=$shipping_method,
            shipment_status=$shipment_status,
            received_date=$received_date
            WHERE barcode = $barcode`</span></span><span class="token punctuation">,</span>
      payload
    <span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>parcels<span class="token punctuation">.</span>changes<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="delete"><a href="#delete" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DELETE</h3>
<p>Okay, now we have the ability to CREATE, READ, and UPDATE. Our envisioned use case doesn't require users deleting records, in fact I think we would like to maintain old records for archival purposes. However, for completeness (and GDPR compliance!) we'll add a simple DELETE route.</p>
<p>Let's first add another sample into our <code class="language-text">001-init.sql</code> file with a static barcode. Add this ABOVE the previous insert, as we will see why in a second.</p>
<div class="gatsby-highlight" data-language="sql">
      <pre class="language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> parcels
    <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> street_address<span class="token punctuation">,</span> attn_name<span class="token punctuation">,</span>
    attn_organization<span class="token punctuation">,</span> city<span class="token punctuation">,</span> state_or_province<span class="token punctuation">,</span> country<span class="token punctuation">,</span> postal_code<span class="token punctuation">,</span> barcode<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
    <span class="token punctuation">(</span><span class="token string">"1A"</span><span class="token punctuation">,</span> <span class="token string">"I SHOULD BE DELETED"</span><span class="token punctuation">,</span> <span class="token string">"Iron Man"</span><span class="token punctuation">,</span> <span class="token string">"The Avengers"</span><span class="token punctuation">,</span> <span class="token string">"New York City"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"US"</span><span class="token punctuation">,</span> <span class="token string">"12345"</span><span class="token punctuation">,</span> <span class="token string">"f34c6658-818b-11e8-adc0-fa7ae01bbebb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>Now let's write a test in our <code class="language-text">routes.spec.js</code> file for our deletion:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'DELETE /api/v1/parcels/:barcode'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should delete one parcel'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    chai
      <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebb'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span>json
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    chai
      <span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels/'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span>json
        res<span class="token punctuation">.</span>body<span class="token punctuation">.</span>should<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token string">'array'</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">'barcode'</span><span class="token punctuation">)</span>
        res<span class="token punctuation">.</span>body<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>barcode<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'f34c6658-818b-11e8-adc0-fa7ae01bbebc'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Here we are sending a request to the server to delete the parcel with "I SHOULD BE DELETED" as an address (note the 'bb' at the end of my barcode instead of the 'bc').</p>
<p>The second request to the server is to get back the full list of parcels, and if the delete works as intended, the first parcel (in position [0]) should now be our parcel with barcode ending in 'bc'.</p>
<p>Run the test. It fails. Now write the route.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels/:barcode'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> dbPromise
    <span class="token keyword">const</span> parcels <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>
      <span class="token string">'DELETE FROM parcels WHERE barcode = ?'</span><span class="token punctuation">,</span>
      req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>barcode
    <span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>parcels<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Run the tests again...</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">deans-Mac-Pro:mailroom dean$ mocha


  API Routes
    GET /api/v1/parcels
GET /api/v1/parcels 200 5.799 ms - 1037
       should return all parcels
    GET /api/v1/parcels/:barcode
GET /api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebc 200 1.022 ms - 517
       should return one parcel
    DELETE /api/v1/parcels/:barcode
       should delete one parcel
    PUT /api/v1/parcels/:barcode
DELETE /api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebb 200 2.549 ms - 79
GET /api/v1/parcels/ 200 2.028 ms - 519
PUT /api/v1/parcels/f34c6658-818b-11e8-adc0-fa7ae01bbebc 200 1.289 ms - 1
       should update one parcel
    POST /api/v1/parcels
POST /api/v1/parcels 200 1.686 ms - 36
       should create one parcel


  5 passing (79ms)</code></pre>
      </div>
<p>And it works! Now we have a fully functional basic CRUD API.</p>
<h2 id="front-end"><a href="#front-end" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Front End</h2>
<p>I want the front end built with React to take advantage of component architecture, however to quickly test that everything works let's start with a simple HTML page.</p>
<p>We should already have a page called <code class="language-text">index.html</code> in our <code class="language-text">./public</code> folder. Let's open that up and add a basic form for our users.</p>
<h3 id="user-view"><a href="#user-view" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User view</h3>
<p>Here's what <code class="language-text">index.html</code> should look like:</p>
<div class="gatsby-highlight" data-language="html">
      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Express<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/stylesheets/style.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Express<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Welcome to Express<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/api/v1/parcels<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    User ID:
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user_id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
      </div>
<p>Now open <a href="http://localhost:3000">http://localhost:3000</a> and try it out!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/001-1e4b98834a4da628c222bb58f57275a9-0d12e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 526px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 76.04562737642586%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABrklEQVQ4y61US0/CQBDuzyfhyokLJwwEOfAM4UKIiQQE5JUArbx8gKUUWsW2lMfnzmJJjShBneTLdLc7X2Z2vh3B4/EgErlEMHiBZDKJbDbLkcvlkM/nOTKZDMLh8B6hEDsbRIj5aDR6AK19Ph+EQCAASbpDrVbDZPIMZSqj2xUxnSowDAPL5Rs0TWN7XdxWq6gyVCpV1Ot1iKLIYiXuW60W4vE4BGJ+Y4Hj8YQRTiDLMvr9Pnq9HtsbQ1H2xLZtY71ef8JqteIwTZOfoWqEWCwGMsuyeJATuNlsDqC18+8YiJSsWCxCSCQS+Kvtdjvuy+UyBKqbbDjoo1QqoVAooNFooN3u8OycgJ+w3W6/ElIz6GJpU5JEdDpdouJwB3/k5PrGcUJd1yAzUl3X8fpiYKYsoM60o+W5yb4lXMxVjIYj3D8M8fh0A+nuCoPhNZZmG4Y1wlxVMZ8vTmfoNMWRgG1bTAYzmJYKg/n1ZsHu8pVLg5TgEJ0kdBpwTldPEp7qpvv+vs3QETaV6xbzOSDhk5HsBHr4/2XNZhOC1+vlk4UmTTqd/hVSqRSfUH6/H++pPVwkPhYykwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of index"
        title=""
        src="/static/001-1e4b98834a4da628c222bb58f57275a9-0d12e.png"
        srcset="/static/001-1e4b98834a4da628c222bb58f57275a9-2494c.png 200w,
/static/001-1e4b98834a4da628c222bb58f57275a9-4377b.png 400w,
/static/001-1e4b98834a4da628c222bb58f57275a9-0d12e.png 526w"
        sizes="(max-width: 526px) 100vw, 526px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>So what's happening here is when you type your User ID in the text field and hit the submit button we use the POST route we made earlier to create a new record in our database.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/002-f74210563befadf2c90110572543198b-0d12e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 526px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 75.47528517110267%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQ4y+1Uy2rCQBSdv3fhxoWfoBFsYrAoRrHkUSG4E2pFrYnVoKmJyTIPX8eZKQGhSou47IGTuXdy75mzuDOkUCigXn+GKIpQVRW9Xg+6pkLTNHS7LzBNE8arwWvkWg2SJKFafaKxjEajgWazydca/VcsFkFKpRJs28Zw+A7XdeH7W8znNhaLBRzHQRAECMMQ4/EYg8GA1r1RDjEajXgf42w2w2Qy4aaIKEpIkhTbbYD12oXnebAsm4p+wqex7/vfokGIgNbEcYzdboc0TWlfwhlHMaIoQqulgMiyDG+zgW1ZWC6XlA6+qFPmbrVa4WM65THbP51OOBwOP7jf78Gg6zqIoig8SZKYn5qRnZxSJ3ylOXPFBK8h2zcMA6TT6fDkeDziN7DGa8x6uWC73eYJs36r4ZKXjjLcFLwX/4IPFszmkM3ataH9C7PBZvefsM+j0O/3QXK5HNj1KwtlVCqVuygIAn8Y8vk8znrIYA/COVaUAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of barcode result"
        title=""
        src="/static/002-f74210563befadf2c90110572543198b-0d12e.png"
        srcset="/static/002-f74210563befadf2c90110572543198b-2494c.png 200w,
/static/002-f74210563befadf2c90110572543198b-4377b.png 400w,
/static/002-f74210563befadf2c90110572543198b-0d12e.png 526w"
        sizes="(max-width: 526px) 100vw, 526px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>As we can see by the random string of numbers and letters we receive back, we are successfully viewing the barcode of our created entry.</p>
<p>At this point we will add additional fields from our database.</p>
<p>We will also add any remaining fields to the routes.</p>
<p>Now our webpage looks like this!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/004-7b3ac67e657fdd5708921537156e3f23-5ca78.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 648px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 125.92592592592592%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAAsSAAALEgHS3X78AAADB0lEQVQ4y61VTW/aQBClx/bi/OMe+hMiRcq1KkqVSM0hbaFKg8ghqhqitHwohIQP22BYcMB8E2Dt6ZsNdgkxRKk60mjX693nmfdmx5EIbH9///XBwcFW9ENU+3R4qMXjcW1nZ0fb3t7Wdnd3tWg0qsViMe3i8lJLXVxov9O/tNPTpHbIe7/FtbOzs61kMvkm4ptlWe87nc6w3W5bVq0mKpWKcLpd0e/1RBdjq9US5XJZ5LJZkcvlRCaTEYVCQVSrVdFoNCyMg1Kp9DEANAzjmGCO4xBACc/UFE3q9Xo0m81ISkmT8YSGw6HywWBIo9GIJpOJGtkQ1GkAeGfffeVFbJiNx2MXm1wcdHk+nU7d+Xzuyrl0AfzIeR0+47OmaX4PAPv9foweTNKKeZ5HYba0qs4Ui8WTABCpKcDz858ylUrR9fU1JRIJ0g2TnjN8UAGCw6eAIF/W63WCQMSjbd8R0lY8BeNorLgbDAYEOoIIQwGxKJ2OE5DfwRz8qg+w27atRIPy1Gy21J6NgDggLatODUTXatk0XSgc5q7rEgThKNcDVk1DZrM5yufzhPpSabJzilw+DLDqeL8eEGpLTo3rsdN+SHM0Gj8CXnZe2xghAKSh64TKJ71SURxy2XAkHCGL4M99v7+/Xw+IeydxrejqKk+VcgUUVEngxjBfY9wUx+k+KRtEuh4QCkrmTjSEUpfVZHG4XDg6RBPm6wGbzaYsFUtIuUaGblANqfd6fQW2yp/voRwiEgVYKZdlJp2lTCbLG9AkTLq9Kap6Y+449RelzHXIglg1SymNDkI1zBdqhpbNxpQBIpG24k0IodqXf2vCnK9fKKCfsq7rMp1OU6lcJuaS+x6XTViqvm2M0DSrsoBOc3tzi1RrKtXZ0vVj8GV/FhAlI9HXPPwCPEM3PVDgAdADfx4AvYdu9df4eZ0onxd1OLVbtmQuQYPEuuQDvnM0q/PpoochkOMAEOQmedF1PfpXg4g/AkCk+BbNNQGFj+Bf8PIlfoSzJ/grvlNge3t7kf9l+G28+gONDkoqyEgDJwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of user view"
        title=""
        src="/static/004-7b3ac67e657fdd5708921537156e3f23-5ca78.png"
        srcset="/static/004-7b3ac67e657fdd5708921537156e3f23-09a0a.png 200w,
/static/004-7b3ac67e657fdd5708921537156e3f23-aba48.png 400w,
/static/004-7b3ac67e657fdd5708921537156e3f23-5ca78.png 648w"
        sizes="(max-width: 648px) 100vw, 648px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>(I also just learned how to take nicer screenshots of the selected window)</p>
<p>And our fields are nicely populating in the database.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/005-dd03dc9ca39ae67d61c006de4fb3c9aa-de101.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 584px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 119.34931506849315%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAD70lEQVQ4y6WVS0/jVhTHGbHB66qrtlK/AFI3VP0Cg7ruoup34CE2IJVHR0JCQgUkVKnd0ZYOEoglq+kKEGWGDBOSycNx3okTSOI4jhOH+H3/PTYQwhTSSr3KX1e6Pv75nHv+92ZoiMbz518P8Xx0JBoNc6/+fMWdBc64dDbH5XI5Lp1KcgcHB9wPL5a4n37+hdva+o37/dctbnZ2ltvf3+dOTk64ZDI5srGx8Wzobrx8+ccn5+fvooHA21Q4HBZOT0+Fo6ND4fCQdHQkBINBgeCCkEgI8VhMiJIKhYIQj/NCKBQSAoFAkmK/6gHn5ua+KJXKkOUGRLGEbCaLpCBAIGWzWVQqFXS0DppNBaqq4vr6Gq7rQNPa/prckEHZftMDTkxMjNVl2dY0jXU6HYdmV6pJbq1ac9vttttSVbfZbPrynum66bZaXXpmUKzpNBoqdnZ2vu0BZ2ZmxizLcml42TBF6cByLJiOgQ8HYwyWZUPXHcrUZt2uw0zTxt7e7j1wampqzHEcl6KRSPAswQsQKyUU6yJMy4Lt2HhisJtvMOzu9gGnp6fHbNt2vYh8Ps94nkcum4NYECGrMirNCpqdJjS9ja7R9bO8lQ/0KnsA9DK0bzO8uAiy4+NjhC4uEIqEIUoiMtUMAakZRgembfZKfxI4PT3Vl2GO8XEe6VQaitZE6jKFdDWNmirBe9Hb2xsOBgCn7oEFKtmzSzTy3odWpSrkdh0lpYxCvQj1uuWDBwL9km0qmfY48j7CyPmIpqJ4FwtCvBT9cltdDdS4B90eUPJ9U8RikaVTGVRrVZTlS19dswuXuf0gX7T2dIaebbygVDrFIpEYlRxBhk5JIidAkiVYpvWkbQYCPR++OQsgmUoizIcRioYhpBPIXeZRrpehdBTaAgVSq46KWmWarhFwgA/L5RITRRFXV1coiEWUr8rIF3JoqAranRZ004BlWzAsA7qlMzL9U025AZL/GN0wCIdCODn5iz5QRkOW4bps4EnZ29t7HEjXE3t7fo4EH0fwIgRJqkNrtT/s7oMue93f3t5+3IfZTIbFYnGk0ynwfAINRUGjKdOx6/QM3Qf3gd1uF+vr6w/30Lk1GZXKjo+O2ZvXr6nbUVaqlVihXmB5qcAqzStGTfFFZ5uZlvk40CvZMAzLsW1G95+jKIojSZKj0d2oG7rjercp4M+O96P5Tt463ZFYW1u7B05OTnyJ/zk2Nze/6wFHR0c/X11d/X5paenH+fn5nhYWFnpaXFz8h+7Wl5eXX4yPj4/6sJWVFW8aIX1E+rRPn/2L+uM+JnH0V/LstuTJoVqtNkxmHiZTD5dKpf8kL9Z7p1gsDlNTfNjfMBGBV7vWCA4AAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of JSON from database"
        title=""
        src="/static/005-dd03dc9ca39ae67d61c006de4fb3c9aa-de101.png"
        srcset="/static/005-dd03dc9ca39ae67d61c006de4fb3c9aa-d3306.png 200w,
/static/005-dd03dc9ca39ae67d61c006de4fb3c9aa-e75b5.png 400w,
/static/005-dd03dc9ca39ae67d61c006de4fb3c9aa-de101.png 584w"
        sizes="(max-width: 584px) 100vw, 584px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3 id="mailroom-view"><a href="#mailroom-view" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mailroom View</h3>
<p>We want our mailroom to be able to input a barcode, view a record, add additional information, and save it to the database.</p>
<p>Lets create a new folder and HTML file <code class="language-text">$ touch mailroom/index.html</code> and open it up to add the following:</p>
<div class="gatsby-highlight" data-language="html">
      <pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Express<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/stylesheets/style.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Mailroom View<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Please enter a barcode to retrieve a record<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/api/v1/parcels<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>get<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        Barcode:
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>barcode<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
      </div>
<p>Now navigate to <a href="http://localhost:3000/mailroom/">http://localhost:3000/mailroom/</a> and see that it appears!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/006-a068f6ebeec8cbacc6e730e80304a82a-f089c.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 530px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 82.45283018867924%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/ElEQVQ4y6WUS2/iMBDHoR+wh36Y7mG7l36grlRFe2n30Gp7QVCCAKEYkQQSyIskCnmQYOPZsYHQVuoDdaS/YjkzP489YzcaaISQc8/z7l3XvUUps9lMMU1TcRxHCYJAfnVdV8bjsUKIphD8TqdTZbFYKPP5/BbH95qmXTQONhqNrgCtqipgjEG6WgE6Q5plYho2mw2EYQRz2wbbtsBxXEjTFPI8hyzNYLvdwnA4vK6B/X7/UgShUxVFEfX9gNq2TfWJTjFjGoYhjaKYxnFMcVGKAIr+UmVZVpxzwKR+1sDJZPJDZEIpZejERaZCYpFab+bQV4iLGBGLR3JVA/EMJBBN/OTwdeP7GMBz/1UDDV2XwDhasru7v/zx4QHanWdotVowGAyk/j09gUbIjoJb3EuYBGJSL4CGIYF5lrLus8rVbhc0jUCv1wNDN8CyLFBVFYHj1+l9BizLNcM24Sus8jJYQrJKwHUd8D0PkiQBz/VwPsBK2+D7/oH5QYZ5xqamyS3LhvV6jQuUtaqqhAhbx/cCWRTRKu8CsYklEHuQFUXOBWx7PKdaospFUcjxh1s+AF9U+VPxHfVd4OV+RdGk7ERVe+CxsUUPwTcNO+F49drt9jk+AH+wejeo3yfqRsR2Op3d44BXp9k42hmqeaLODsH4DuwGmLFQ85uSrP8zA+U+x5gfcAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of mailroom view"
        title=""
        src="/static/006-a068f6ebeec8cbacc6e730e80304a82a-f089c.png"
        srcset="/static/006-a068f6ebeec8cbacc6e730e80304a82a-e82c6.png 200w,
/static/006-a068f6ebeec8cbacc6e730e80304a82a-42d83.png 400w,
/static/006-a068f6ebeec8cbacc6e730e80304a82a-f089c.png 530w"
        sizes="(max-width: 530px) 100vw, 530px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>If we enter a barcode from our database and hit submit...</p>
<p>Uh oh.

  <a
    class="gatsby-resp-image-link"
    href="/static/007-f92971253378dcfd71afa266a1b307c4-a1990.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 680px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 130.4411764705882%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsSAAALEgHS3X78AAADwElEQVRIx6WVXW/aVhjHE8matN5UXadK61K5Upeu03LRSFGlXqzavkkv+hVy0Q/RfYNd9aLZW9Jk2ppGSXgJsACBYAiYBJICJhiDscEYG7+dZ4+NSmggSbcd6y8fY/vH/zwvx1NTOLa2tq6tr7+9u7GxQfsDfjqRSNCxWIxOJhN0NBqlNzc3aXzGm4fDEe9eKBSi/X4/HQwG6UAgeNfn812bej92d3efMUwaWDavchynHReLWqFQ0PBaK5fLWvW0qsXjcS0cCmk7OztaIBDQ8B2NYRgtn8+r2WwWwuHwsyFwe3t7sdfrgSAI0Gg0oVwqQ6VSgYbQAFEUQZZl716tVoN6vQ58jR+cecFTr6cDOlwcAvFfFwGHbduWZduOYRjElWVZxDRNT+78vfA5ousm6XQMR1FMCx+FtbW1MyDGxgN2u4qtKD2CUHCIAx8xiOvDnSwvL48DeZ63M+kMqfE8dLqK6xgIIZdpCFxZWRkHctypHdyJkEQyDQyTgxrfRNf6wMoIaOT6ciAG3o7H4uTw6AgqNQ54kQe93x9f5xn0cmCj0bBT+/uESTHAuVluYdaVBvAyD6fSKXQ05d87PDzME7bIAltgPYfVVhUaHSyfrghdXQXHcSYCJybFBaaZNHlXKUFVqIHUkUAzddBN/colYydNBrpZzmZzcPzuBErVEiZl4Go0IYN6+dAhds6kGAp2KpUixZMTyBaycJDPQKFUBB5jKXZEL4aSKoOoiGBa5gd1GIlEJtfh3l6cYH9C5uAAyrj0OrZc3zTAQLnFbjs2WLY1cEuuAGKv2midHCAszWSgjT1s9I2L22RkyZMdIhDnJJPJAMYSN4YmqGpvrLAndcpEoFCvY2HHSDKRgGKxCC2pBYZhngE/1iHudR5QVVVbkiQiNkV3jnEzPcj5DF8JxB3YA7bbbVuWu7jbOOAecA52nnl1DOu8VzYVjvOWi3vfWNwuKuwLsxyNDrLMsiyIrSboev9/JEWom4m9uNvPDsdXnGqz6qia6q7dwXeH5zNhUQLxsobflJEYRuPP3R9lueN+qODo6BhLSICu1gPFVEHS2yD3lUu3bszD8yHwxxc/PV1dDRdevdrIvnz5V25paTv36y+B3B9/RnO/vQ56+n01lHu99nfu7fp+bn1Eb94ksz5furC09PNTD/bD94+n8XQLtYB6/B/lvnvryZPvpj3o/PyD6YWFWerOzHXq5s1PUJ9St7+4Tt3/5ktq5qvPqJl7Nyh69nNq9sFtan7+a9T9oR4+nKUePZqj5ua+9WD/AAWBK8z/X+eKAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of mailroom view"
        title=""
        src="/static/007-f92971253378dcfd71afa266a1b307c4-a1990.png"
        srcset="/static/007-f92971253378dcfd71afa266a1b307c4-b180f.png 200w,
/static/007-f92971253378dcfd71afa266a1b307c4-f9465.png 400w,
/static/007-f92971253378dcfd71afa266a1b307c4-a1990.png 680w"
        sizes="(max-width: 680px) 100vw, 680px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>We get back an array of all our parcels. Not what we're looking for. If we look in the address bar we can see why this is happening: the barcode is being sent to the <code class="language-text">/api/v1/parcels</code> route as a query parameter instead of using the <code class="language-text">/api/v1/:barcode</code> route we defined earlier.</p>
<p>Now we can decide to either</p>
<ul>
<li>use the barcode as a query parameter and refactor our routes, or</li>
<li>we can see if the form can submit to our <code class="language-text">/api/v1/:barcode</code> route as a path variable</li>
</ul>
<p>I'm not sure if there is a right answer as this design consideration seems to be subjective from the research I've done, but as our HTML form is presenting us with the query option by default we will go with that paradigm.</p>
<p>We will change our route to the following which will show us a specific parcel when a barcode is supplied as a query parameter.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/v1/parcels'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token punctuation">{</span> $barcode<span class="token punctuation">:</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>barcode <span class="token punctuation">}</span>
    <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">await</span> dbPromise
    <span class="token keyword">const</span> parcels <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
      <span class="token string">'SELECT * FROM parcels WHERE ($barcode IS NULL OR barcode = $barcode)'</span><span class="token punctuation">,</span>
      query
    <span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>parcels<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="adding-react"><a href="#adding-react" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding React</h3>
<p>Now that we've tested with basic HTML we are going to add React as our frontend framework to easily handle dynamic content changes. Because we're looking to have the content rendered server-side we will also use Next.js.</p>
<p>Let's make a client directory to handle our client-side code</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">$ mkdir client &amp;&amp; cd client</code></pre>
      </div>
<p>Then initialize a new package.json with <code class="language-text">$ npm init -y</code> and install next with</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">$ npm install -s react react-dom next</code></pre>
      </div>
<p>If we add the following to our package.json</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token string">"scripts"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"dev"</span><span class="token punctuation">:</span> <span class="token string">"next"</span><span class="token punctuation">,</span>
    <span class="token string">"build"</span><span class="token punctuation">:</span> <span class="token string">"next build"</span><span class="token punctuation">,</span>
    <span class="token string">"start"</span><span class="token punctuation">:</span> <span class="token string">"next start"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>and create a pages directory with an index.js file</p>
<div class="gatsby-highlight" data-language="text">
      <pre class="language-text"><code class="language-text">$ mkdir pages &amp;&amp; touch pages/index.js</code></pre>
      </div>
<p>now add a simple export</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>run <code class="language-text">$ npm run dev</code> and open <a href="http://localhost:3030">http://localhost:3030</a> to see our message!</p>
<p>Note: In my case, the default localhost:3000 was taken.</p>
<p>Let's rewrite our two pages as components. Starting with a <code class="language-text">users.js</code> in our pages folder</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">UserPage</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>h1<span class="token operator">></span>User View<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&lt;</span>p<span class="token operator">></span>Please fill out the following form to generate your shipping code<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>

        <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"/api/v1/parcels"</span> method<span class="token operator">=</span><span class="token string">"post"</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>fieldset<span class="token operator">></span>
            <span class="token operator">&lt;</span>legend<span class="token operator">></span>User Information<span class="token operator">&lt;</span><span class="token operator">/</span>legend<span class="token operator">></span>
            User <span class="token constant">ID</span><span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"user_id"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> File Number<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"file_id"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">></span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>fieldset<span class="token operator">></span>
            <span class="token operator">&lt;</span>legend<span class="token operator">></span>Package Information<span class="token operator">&lt;</span><span class="token operator">/</span>legend<span class="token operator">></span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"shipment_type"</span> value<span class="token operator">=</span><span class="token string">"mail"</span> <span class="token operator">/</span><span class="token operator">></span> Mail
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"shipment_type"</span> value<span class="token operator">=</span><span class="token string">"parcel"</span> <span class="token operator">/</span><span class="token operator">></span> Parcel
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> Destination<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">"shipment_locale"</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"local"</span><span class="token operator">></span>Within the Lower Mainland<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
              <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"national"</span><span class="token operator">></span>Within Canada<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
              <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"international"</span><span class="token operator">></span>International<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> Shipping Speed<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>select name<span class="token operator">=</span><span class="token string">"shipment_speed"</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"one"</span><span class="token operator">></span>One<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
              <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"two"</span><span class="token operator">></span>Two<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
              <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"three"</span><span class="token operator">></span>Three<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">></span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>fieldset<span class="token operator">></span>
            <span class="token operator">&lt;</span>legend<span class="token operator">></span>Recipient Information<span class="token operator">&lt;</span><span class="token operator">/</span>legend<span class="token operator">></span>
            Recipient Name<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"attn_name"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> Phone Number<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"tel"</span> name<span class="token operator">=</span><span class="token string">"attn_phone"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> Organization<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"attn_organization"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">></span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>fieldset<span class="token operator">></span>
            <span class="token operator">&lt;</span>legend<span class="token operator">></span>Shipping Address<span class="token operator">&lt;</span><span class="token operator">/</span>legend<span class="token operator">></span>
            Address<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"street_address"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> City<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"city"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> Province<span class="token operator">/</span>State<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"state_or_province"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> Country<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"country"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span> Postal Code<span class="token punctuation">:</span>
            <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"postal_code"</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">></span>
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"Submit"</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>Which will now be available at <a href="http://localhost:3030/user">http://localhost:3030/user</a></p>
<p>And make a new file for our mailroom at <code class="language-text">/pages/mailroom.js</code></p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">MailroomPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Mailroom View<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>p<span class="token operator">></span>Please enter a barcode to retrieve a record<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"/api/v1/parcels"</span> method<span class="token operator">=</span><span class="token string">"get"</span><span class="token operator">></span>
        Barcode<span class="token punctuation">:</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"barcode"</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"Submit"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MailroomPage</code></pre>
      </div>
<p>Which will now be available at <a href="http://localhost:3030/mailroom">http://localhost:3030/mailroom</a></p>
<h3 id="showing-the-qr-code-on-submission"><a href="#showing-the-qr-code-on-submission" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Showing the QR code on submission</h3>
<p>Next steps are to handle the form using React's "controlled components" and display the resulting barcode as a QR code on the same page.</p>
<p>We'll start by adding a constructor and input handler to our userpage component</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">UserPage</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      user_id<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      file_id<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      shipment_type<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      shipment_locale<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      shipment_speed<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      attn_name<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      attn_phone<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      attn_organization<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      street_address<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      city<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      state_or_province<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      country<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      postal_code<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleInputChange</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> target<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'checkbox'</span> <span class="token operator">?</span> target<span class="token punctuation">.</span>checked <span class="token punctuation">:</span> target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> target<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span></code></pre>
      </div>
<p>and on each <code class="language-text">&lt;input&gt;</code> we will add <code class="language-text">value={this.state.###} onChange={this.handleChange}</code> where ### is the name of that input, for example:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>input
  type<span class="token operator">=</span><span class="token string">"text"</span>
  name<span class="token operator">=</span><span class="token string">"user_id"</span>
  value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>user_id<span class="token punctuation">}</span>
  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span></code></pre>
      </div>
<p>our Radio buttons will look slightly different:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>input
  type<span class="token operator">=</span><span class="token string">"radio"</span>
  name<span class="token operator">=</span><span class="token string">"shipment_type"</span>
  value<span class="token operator">=</span><span class="token string">"mail"</span>
  checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>shipment_type <span class="token operator">===</span> <span class="token string">'mail'</span><span class="token punctuation">}</span>
  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span></code></pre>
      </div>
<p>as will our Select options:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>select
  name<span class="token operator">=</span><span class="token string">"shipment_locale"</span>
  value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>shipment_locale<span class="token punctuation">}</span>
  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
<span class="token operator">></span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"local"</span><span class="token operator">></span>Within the Lower Mainland<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"national"</span><span class="token operator">></span>Within Canada<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"international"</span><span class="token operator">></span>International<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span></code></pre>
      </div>
<p>Now if we were to check in React Developer Tools (a Chrome addon) we should see all our state values populating correctly</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/009-6da17f08bc0d4d3fdf4eec3c27bf88f4-93449.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 72.58566978193146%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACaElEQVQ4y62Sy27TQBSGvWDPpoJXYG31fXgQRFjwFN0gsWtFpNwaukEgClVJqEzSNsSO7cRxYufWOL40tmfGnuF40qZJVWABR/59OXPm83+OLZRLlZ1arf6iddl6VavVcnJbzvV6vdzF+UVO7ag5TdVyuqavpak6z60E61ADdS8VpfP6e73+XMjn87vzucOiKOK6HwghFse3ihlGMeQww3glRAhLQFmomtYS9vf3RXAUWZZNrq+XiFKKCSE4uwZ+gEe2jS1riMfjEbZtC0+nY3w1m2F/scAAxtcRnDCOM6DjOF+Fg4MD0bZt4noOc905dV2Pet5KvuvTYdug436XTsYmnY6H1LYs6s4mNLZtuphMqO/7NE3TJAPC/alQqZTFft8k5uCSuUGThvGIJUnKwCUfgTfxGAoRg028tTSljEDrS9NkV9Mpr4NuOBBMnArVapUDu90eJByK0HI1q5sZ8aDbc00gH6kqcw2DeUHAU2tgpVIRDcMgg8GAXc08GkcpC8MI3nwHBAdr8d3gCjnwIQEGE9x2WCwWRV3vEk1TmKp/pguvCbDMIfktMGt/0/QWsFwuiaY5JMOhwUaTBg2WXYYJ3mr5QeBGbgt4ePheVFWZtJWPbOZ8o2E0B4cJwBDXn4Aba3fAUilrWSeaXmdT5xNdRvr6K//N4YPAQqEgBkGAsprsf4IDgp+S7Dkr5hturpnur8E9vgGeCEdHR7vsP0UYhpKwt7f3rN1u1xRFbsiyLN2q0+lIP84k6fjDsVT/ciK9Kx1Lb4un0nmzITWbTWmzFnSmKMrPRqPxRoB4BNoBPflHPQU9/gXYcQmdfixGVQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of React Developer Tools"
        title=""
        src="/static/009-6da17f08bc0d4d3fdf4eec3c27bf88f4-23e9c.png"
        srcset="/static/009-6da17f08bc0d4d3fdf4eec3c27bf88f4-3d6e3.png 200w,
/static/009-6da17f08bc0d4d3fdf4eec3c27bf88f4-33138.png 400w,
/static/009-6da17f08bc0d4d3fdf4eec3c27bf88f4-23e9c.png 800w,
/static/009-6da17f08bc0d4d3fdf4eec3c27bf88f4-82939.png 1200w,
/static/009-6da17f08bc0d4d3fdf4eec3c27bf88f4-93449.png 1284w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Now lets change the form behaviour. The line</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"/api/v1/parcels"</span> method<span class="token operator">=</span><span class="token string">"post"</span><span class="token operator">></span></code></pre>
      </div>
<p>changes to</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span></code></pre>
      </div>
<p>and we'll have to write a function to handle the POST request in Javascript.</p>
<p>Add the following to our constructor:
<code class="language-text">this.handleSubmit = this.handleSubmit.bind(this);</code>
and create the function:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">  <span class="token function">handleSubmit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Test'</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span></code></pre>
      </div>
<p>And now when we hit the Submit button we should see our data appear in an alert box in the browser window.</p>
<h3 id="cors"><a href="#cors" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CORS</h3>
<p>Let's modify the <code class="language-text">handleSubmit</code> function to post JSON to our API route.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">  <span class="token function">handleSubmit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://localhost:3000/api/v1/parcels`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
      mode<span class="token punctuation">:</span> <span class="token string">'cors'</span><span class="token punctuation">,</span>
      headers<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      body<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> barcode<span class="token punctuation">:</span> data<span class="token punctuation">.</span>barcode <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>Now we run into a CORS (Cross Origin Resource Sharing) issue. This is because, in my case, the API server is running on localhost:3000 and the nextjs server is running on localhost:3030</p>
<p>To solve this: in our root project directory (ie. not in the client folder) run <code class="language-text">$ npm install -s cors</code>. Open app.js and add</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>now restart the server <code class="language-text">$ npm start</code> and try the request from the client again.</p>
<p>We should see a "Success!" message in our console, and our barcode in our component's state!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/010-3dc6f3e7bdfd5443059dc2ecb5976402-01859.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 88.55311355311356%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAADcElEQVQ4y6VU224bVRQdkCrEI08wPPIj/EH+ADCKEJZiiyZPkWggavsPNBJ/gFRLJG0eaBI7Up2LcFzbjd3anvtMZnzGnls8N8+c2eyZhKhpUZFgS0tnPxytWXvtNYd59MujO4eNw6/OztorrwaDcq/XK3McVx70B+VWq1Xudrq30Ov23kXv5fet1lm1flD/gllZWfmU4/h5HC+AEFIgimJI0xR838c+uoUgCCDwg+L0/aven88hSRLY39//llleXmaHw6EuyzLIsrQAgPR9IMRIDUNPFVnC8yLlFTUhF1q8iEI4PDz8hqlWKqwkSWQ6nYGum9Rx5pllOZlt25lpmsWJagtQSjNFtTJxpGS8pGbSxSRT9GnGyRfJ1Pah3kDCH++ts5IoE1EagqicUMfrQxh5sFgkEMcxnoti/Bx533o1g+OODn++nsIp9q2Rl3X4y1QwM2g8Py0xa2trrK7rBJWAOROpHyjolXtD+CZC9NCSNZgMOXB0HfoDFfbakyyKwtwOOD1FwvsPHrCj0Yh0Ol0QRYXatgeu60EYhoAjFmb/rTBGhbE5BVcUQdc0XKAJrudlc98vCNHDErO+vs4qikIMw4CJQehs5sLl5dUWc1VvbjhXmFgWOKoKFk50Xdn1wmBvb6/EbG5usuPxiHBjHji+R8m0D36goyJ6oywHzT1EtR5+2B2PwTFNCPGDOEGW5Bewms1midnYuMcKvEAURQNJPqcG6SChVmTx7QzmNuT3OFEBC0e3pwhMgiYrqUksePbHsxLz088brCCIRBBfgGYcUT8Ui4VQmt5WeO1ngArV8z5MOR7iyQTAtjJHMVKJ9+C4eVJiHj68nwebdLpNGAq/UetyF0dRr8zJshvklSKhj9uVX56DI8mARhaELhIqggcnzeMSc/fuD0VswjDCX8mmUWzjMsJCZZ67txGiKuP1EKMzulLo2DeEx8+RsFqtsvP5nFxvjMK/lGs7oCkqmBMC9mwGke9nhqalCb4FL9rtElOpVD7DiOjFSDRdoHcJ+vWPwCuJZTuJIMmJphuJ7biJoqoJLwhxEAbQbre/ZlZXVz9HswP4j5X7m79KeR0dHX3HLC0tfXJwcPBro9H4vV6vP0bU3oednSe17e3t2tOnT7Dfqe3u7tYw0I+RY2dra+tLBusDxB3Ex/8THyE+/AvfOLQJrTxCIQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of React Developer Tools - success"
        title=""
        src="/static/010-3dc6f3e7bdfd5443059dc2ecb5976402-23e9c.png"
        srcset="/static/010-3dc6f3e7bdfd5443059dc2ecb5976402-3d6e3.png 200w,
/static/010-3dc6f3e7bdfd5443059dc2ecb5976402-33138.png 400w,
/static/010-3dc6f3e7bdfd5443059dc2ecb5976402-23e9c.png 800w,
/static/010-3dc6f3e7bdfd5443059dc2ecb5976402-01859.png 1092w"
        sizes="(max-width: 800px) 100vw, 800px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3 id="the-qr-code"><a href="#the-qr-code" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The QR Code</h3>
<p>Next up: creating a component that will display our QR code.</p>
<p>Let start with a components folder in our client directory <code class="language-text">$ mkdir client/components</code> and create a file called <code class="language-text">label.js</code></p>
<p>In <code class="language-text">label.js</code> we'll create a simple functional component that accepts props.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> props <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>barcode<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>In <code class="language-text">user.js</code> we'll add to the top:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Label <span class="token keyword">from</span> <span class="token string">'../components/label'</span></code></pre>
      </div>
<p>and under the closing form tag add a <code class="language-text">&lt;Label barcode={this.state.barcode} /&gt;</code> tag.</p>
<p>Now when we submit the form, our barcode string appears!</p>
<p>In our client directory, run <code class="language-text">$ npm install -s bwip-js</code> which is the library that will allow us to generate QR codes.</p>
<p>In <code class="language-text">label.js</code> add our import statement and modify the functional component to a class component:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> bwipjs <span class="token keyword">from</span> <span class="token string">'bwip-js'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Label</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">bwipjs</span><span class="token punctuation">(</span>
      <span class="token string">'target-canvas'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        bcid<span class="token punctuation">:</span> <span class="token string">'qrcode'</span><span class="token punctuation">,</span>
        text<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>barcode<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span>err<span class="token punctuation">,</span> cvs<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>canvas id<span class="token operator">=</span><span class="token string">"target-canvas"</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>Now fill out the form and click submit. Voila! A QR code appears.</p>
<h3 id="the-mailroom-view"><a href="#the-mailroom-view" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Mailroom View</h3>
<p>To make the next part easier, I made a component that lists all existing records in the database.</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">LabelList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">componentDidMount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://localhost:3000/api/v1/parcels`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">:</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>h3<span class="token operator">></span>All Records<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>label <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>label<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>label<span class="token punctuation">.</span>barcode<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>then <code class="language-text">import LabelList from &#39;../components/labelList&#39;;</code> and add <code class="language-text">&lt;LabelList /&gt;</code> under the form in the mailroom view.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/011-7b191593dcfa3eb96ecb42397d3e50f7-fc1d2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 512px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 166.796875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsSAAALEgHS3X78AAAE5ElEQVRIx62WS28TVxTH7UDihJBQVW06u6pCqvrgS2TfLtpKFaoqdQVdBQkpHyCRIgW6KSvYsOkGsQOk1iTQpKQ0iT0PX8947NjOA2IbP+JHXk1ixzc+/Z9rQ0EFO616peN7PZ75+Zz/Oefe8RCR538dN2/+xFNXMBD8YWF+8bfAYvDneDzuj7pRv2Waftd1/UuxJf/j3x/7f3340P/wwQP/3Nyc3zRMv2M7vxi6MYP1DTC89+7e83g++/wLBg5apuXmsnlaXl6h7e1tKpfLVMjn1Xpvb49isRiFhSABwx/S2toara+vUy6bo1BI5MAYGB0d9Xq++fY7Br4XjUbNSqVCqXS6lkql67i5Ho8nYPF6JpOp53K5erFYVHZwcFCv1Wo8Hx4cVBm8wozr1294Pc+yWQZq+XxeUHPI1kyNoyOq1Q6b60aDqtWqMsCaVq0d8W+I5gkzpqamvErHd4eGtLnZWXHnzl26feuWnLo/RfenpunxH/O0MD9P0IZsJ0KvGQq4u7urgLOzs17P119+pTxMpVJia2uLMum0ZO3W11NULJVoH/o9y2Roc3PzFRJ7DFNA6KyAMzMzXs/ZD95XwGQyIaAJuy/L5QptFDYom81SqVSmfC5HzWsFSqczdFivP4cq4M7Ozt/A1tCWlmKiXC7Bm2dyd/dPlV3cqDK8Dc8Zxknb399X3r0ReO7TTxRwdXVFNEE78qWQ6AiJ4bmCMtra2n5tyK/x0KvFoq5IJpMUth0ZFiHlWbvxRuC5jz5WHq6trgoOEbrJHJJSQRI4EaViSelX3ChSYWMDnlbah8zjVH+/ZhqGQCuRYRjSsCx0xhJF3QgZuknhsE16UKeFxQBFUD4t3puBAwODWjCoC9txCFBpAmgYDAqTDZgDm0c96rqB6xZxd7QF9vb2adgIBPcpGl1aIaH6Fu1IIStENjxHv7L35EZcqkvZHugDMGSZwg47HJ4UAp7Z8Awe4w/IME3MhgLyb4eHh+2BpwcRciAoODRoJFWo0IofFvDMwdo0LcKORJAGtXjQHtjT042QLcFbV8RxpAgLct0oJRNJhMweNkEL8wsqQfVOndLXf0rTdV1gIyUdGrJmrGHIgmF2ozFkuxlyIBAgbtH2Senr1UwkJRFPsPiSvbARNoes1tCTQw7jO+7rrOGJkyc1PAQPo1wqkjPLugWDBgV1HaUEIEpJXce6Wq119hDhwMM4gI5UoeJhC/rFEK6FtfreSlCtY5ZPn0ZhI8uOjdqLqSwrEzaAUQXkDLOOLENH4Jm3zqiyCYU4VEdym7mR6Av9mmVj0tyjR7Systp5t+k60aWh5UQysUyRiCu5X1XLAYbs45RLILtBVTq20rBD6/X4erQwNx4g+JB8ZPJGAZdV2TB8cXGxVTZBqtY6JGVgcEDToSGXBYpYPi8R1cdOs48D2GkYeqzC7urq0pAEsf70KT1ZeyIjbqSBN4YGukbNSFRDiFDDNI1GMrncALDR5DXkP4CFQkFtsDicQq3NuN46HjvaS8C1F8coWkm9OeCNwKH/OABMM2N6etrrOX/+PAPfnpiY+P7KlSvXxsbGfhwfH792HON7Jycnr129enUEjHeGh4db+6HP14tpCHYW9uG/NH5mqA/jlde6kZGR7kuXLvkuXLjgu3jx4rGM78VzvsuXL3fz0cmcvwCPyil/GWIqlQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="screenshot of mailroom barcode list"
        title=""
        src="/static/011-7b191593dcfa3eb96ecb42397d3e50f7-fc1d2.png"
        srcset="/static/011-7b191593dcfa3eb96ecb42397d3e50f7-c8d1c.png 200w,
/static/011-7b191593dcfa3eb96ecb42397d3e50f7-055c0.png 400w,
/static/011-7b191593dcfa3eb96ecb42397d3e50f7-fc1d2.png 512w"
        sizes="(max-width: 512px) 100vw, 512px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Now it will be easy to grab a barcode to test.</p>
<p>Lets create a component to render our retrieved record from the database:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Record.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Record</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">.</span>barcode<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>And let's modify the mailroom with some of the same code we used in the user view, handleSubmit and handleChange</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">// mailroom.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> LabelList <span class="token keyword">from</span> <span class="token string">'../components/labelList'</span>
<span class="token keyword">import</span> Record <span class="token keyword">from</span> <span class="token string">'../components/Record'</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MailroomPage</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> barcode<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleSubmit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`http://localhost:3000/api/v1/parcels?barcode=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>barcode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>data <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">:</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target
    <span class="token keyword">const</span> value <span class="token operator">=</span> target<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'checkbox'</span> <span class="token operator">?</span> target<span class="token punctuation">.</span>checked <span class="token punctuation">:</span> target<span class="token punctuation">.</span>value
    <span class="token keyword">const</span> name <span class="token operator">=</span> target<span class="token punctuation">.</span>name
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>h1<span class="token operator">></span>Mailroom View<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&lt;</span>p<span class="token operator">></span>Please enter a barcode to retrieve a record<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
        <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>
          Barcode<span class="token punctuation">:</span>
          <span class="token operator">&lt;</span>input
            type<span class="token operator">=</span><span class="token string">"text"</span>
            name<span class="token operator">=</span><span class="token string">"barcode"</span>
            value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>attn_name<span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"Submit"</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
        <span class="token operator">&lt;</span>Record data<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>LabelList <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MailroomPage</code></pre>
      </div>
<p>Now when we submit a barcode, we should see the name of our recipient.</p>
<h2 id="fleshing-things-out"><a href="#fleshing-things-out" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fleshing things out</h2>
<p>Here are some easy steps I completed without documenting:</p>
<ul>
<li>Header component with navigation links to make it easy to swap between views.</li>
<li>More information on record retrieval in the Record component.</li>
<li>More fields in the Label component to give the user feedback on their submission</li>
</ul>
<h2 id="next-steps"><a href="#next-steps" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next Steps</h2>
<p>And the next steps for the project:</p>
<ol>
<li>Add the ability for the Mailroom to edit retrieved information and update the database.</li>
<li>Autofocus the Barcode entry field to make it easier to use a QR Code scanner</li>
<li>Format the Label the user creates to make it nicely printable.</li>
<li>Add authentication so only authorized users can access the Mailroom.</li>
</ol></div></div><div style="grid-column:2;" data-reactid="16"><div style="position:sticky;top:1rem;padding:1rem 0 0 1rem;margin-left:2rem;border-left:4px solid #eee;width:20rem;font-size:.75rem;" data-reactid="17"><h4 data-reactid="18">Table of Contents</h4><a style="text-decoration:none;color:#333;" href="/projects/mailroom#ideation" data-reactid="19"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="20">Ideation</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#setup" data-reactid="21"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="22">Setup</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#database" data-reactid="23"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="24">Database</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#writing-tests" data-reactid="25"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="26">Writing Tests</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#routing" data-reactid="27"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="28">Routing</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#get" data-reactid="29"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="30">GET</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#post" data-reactid="31"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="32">POST</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#put" data-reactid="33"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="34">PUT</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#delete" data-reactid="35"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="36">DELETE</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#front-end" data-reactid="37"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="38">Front End</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#user-view" data-reactid="39"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="40">User view</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#mailroom-view" data-reactid="41"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="42">Mailroom View</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#adding-react" data-reactid="43"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="44">Adding React</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#showing-the-qr-code-on-submission" data-reactid="45"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="46">Showing the QR code on submission</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#cors" data-reactid="47"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="48">CORS</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#the-qr-code" data-reactid="49"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="50">The QR Code</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#the-mailroom-view" data-reactid="51"><div style="padding-left:1rem;font-family:sans-serif;" data-reactid="52">The Mailroom View</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#fleshing-things-out" data-reactid="53"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="54">Fleshing things out</div></a><a style="text-decoration:none;color:#333;" href="/projects/mailroom#next-steps" data-reactid="55"><div style="padding-left:0rem;font-family:sans-serif;" data-reactid="56">Next Steps</div></a></div></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-25896bf7c2892019ba26.js","122212659448958":"component---src-templates-blog-template-js-9e637b6b60ff3298ace5.js","163982453685085":"component---src-templates-blog-template-with-toc-js-344f2b27f97a3f6d2906.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","35783957827783":"component---src-pages-index-js-f136e69d5d325feb1f12.js","60335399758886":"path----a1f85b935d0d49e08051.js","273950069227526":"path---about-792246ad172f1fbb1032.js","27027048473407":"path---projects-mailroom-f1aea9bca1827d539acc.js","163496051235567":"path---projects-brincao-f468b99290283a16fb6b.js","6709832987247":"path---projects-flextogcal-d4409f8c6c695a7ba8d0.js","250301090669686":"path---projects-bc-votes-683dd32d92f3aeb2bae0.js","199803406507071":"path---projects-the-last-skytrain-4ef1dd7d80bec0a17c4e.js","169827572607570":"path---projects-ferrytracker-36c2b699bec9d635ce46.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-6d3c30359aed42409e51.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-f7c1aba907a24c2fee22.js"}/*]]>*/</script><script>/*<![CDATA[*/!function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",["/commons-403258ad126d5c26671b.js","/app-25896bf7c2892019ba26.js","/path---projects-mailroom-f1aea9bca1827d539acc.js","/component---src-templates-blog-template-with-toc-js-344f2b27f97a3f6d2906.js","/component---src-layouts-index-js-f7c1aba907a24c2fee22.js"])/*]]>*/</script></body></html>